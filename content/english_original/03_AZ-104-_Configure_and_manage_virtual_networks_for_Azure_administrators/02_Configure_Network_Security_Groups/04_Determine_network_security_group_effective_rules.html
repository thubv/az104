<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Determine network security group effective rules - Training | Microsoft Learn</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px;
            color: #333;
            background-color: #fff;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #0078d4;
            margin-top: 2em;
            margin-bottom: 1em;
            font-weight: 600;
        }
        
        h1 { 
            border-bottom: 3px solid #0078d4; 
            padding-bottom: 15px; 
            font-size: 2.2em;
            margin-bottom: 1.5em;
        }
        
        h2 { 
            font-size: 1.6em; 
            border-left: 4px solid #0078d4;
            padding-left: 15px;
        }
        
        h3 { font-size: 1.3em; }
        h4 { font-size: 1.1em; }
        
        p {
            margin: 16px 0;
            text-align: justify;
            line-height: 1.7;
        }
        
        ul, ol {
            margin: 20px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        code {
            background-color: #f6f8fa;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #d73a49;
        }
        
        pre {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border-left: 4px solid #0078d4;
            margin: 20px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: #333;
        }
        
        blockquote {
            border-left: 4px solid #0078d4;
            padding: 20px;
            margin: 20px 0;
            background-color: #f8f9fa;
            border-radius: 4px;
            font-style: italic;
        }
        
        .source-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 5px solid #2196f3;
            font-size: 0.9em;
        }
        
        .source-info h2 {
            margin-top: 0;
            color: #1976d2;
            font-size: 1.2em;
        }
        
        .translation-placeholder {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            padding: 20px;
            border-radius: 8px;
            margin-top: 40px;
            border-left: 5px solid #ff9800;
        }
        
        .translation-placeholder h2 {
            margin-top: 0;
            color: #f57c00;
            font-size: 1.2em;
        }
        
        img { 
            max-width: 100%; 
            height: auto; 
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Image container for better layout */
        .image-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .image-container img {
            margin: 10px 0;
        }
        
        .image-container p {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
            margin-top: 10px;
        }
        
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 25px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th, td { 
            border: 1px solid #ddd; 
            padding: 15px; 
            text-align: left; 
        }
        
        th { 
            background-color: #f5f5f5; 
            font-weight: bold;
            color: #0078d4;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        
        strong {
            color: #0078d4;
            font-weight: 600;
        }
        
        a {
            color: #0078d4;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        /* Alert boxes */
        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
            border-left: 4px solid;
        }
        
        .alert.is-info {
            background-color: #e3f2fd;
            border-left-color: #2196f3;
            color: #1976d2;
        }
        
        .alert.is-warning {
            background-color: #fff3e0;
            border-left-color: #ff9800;
            color: #f57c00;
        }
        
        .alert-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="source-info">
        <h2>ðŸ“š Course Information</h2>
        <p><strong>Unit:</strong> 4 Determine Network Security Groups Effective Rules</p>
        <p><strong>Source:</strong> <a href="https://learn.microsoft.com/en-us/training/modules/configure-network-security-groups/4-determine-network-security-groups-effective-rules/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.az-104-manage-virtual-networks" target="_blank">https://learn.microsoft.com/en-us/training/modules/configure-network-security-groups/4-determine-network-security-groups-effective-rules/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.az-104-manage-virtual-networks</a></p>
        <p><strong>Course:</strong> AZ-104: Microsoft Azure Administrator</p>
    </div>
    
    <div class="main-content">
        <div class="embeddedvideo">
 <iframe allowfullscreen="true" data-linktype="external" frameborder="0" src="https://learn-video.azurefd.net/vod/player?id=ffb9cc78-4d30-49ad-bc97-78004c43a1d6&amp;locale=en-us&amp;embedUrl=%2Ftraining%2Fmodules%2Fconfigure-network-security-groups%2F4-determine-network-security-groups-effective-rules" title="Video Player">
 </iframe>
</div>
<p>
 Each network security group and its defined security rules are evaluated independently. Azure processes the conditions in each rule defined for each virtual machine in your configuration.
</p>
<ul>
 <li>
  For inbound traffic, Azure first processes network security group security rules for any associated subnets and then any associated network interfaces.
 </li>
 <li>
  For outbound traffic, the process is reversed. Azure first evaluates network security group security rules for any associated network interfaces followed by any associated subnets.
 </li>
 <li>
  For both the inbound and outbound evaluation process, Azure also checks how to apply the rules for intra-subnet traffic. Intra-subnet traffic refers to virtual machines in the same subnet.
 </li>
</ul>
<p>
 How Azure ends up applying your defined security rules for a virtual machine determines the overall
 <em>
  effectiveness
 </em>
 of your rules.
</p>
<h3 id="network-security-group-evaluation">
 Network security group evaluation
</h3>
<p>
 When you apply network security groups to both a subnet and a network interface, each network security group is evaluated independently. Both inbound and outbound rules are considered based on the priority and processing order.
</p>
<p>
 <span class="mx-imgBorder">
  <img alt="Diagram of two network security groups applied to a subnet." data-linktype="relative-path" loading="lazy" src="../../../assets/multiple-nsgs_1c073979.png"/>
 </span>
</p>
<h3 id="things-to-consider-when-creating-effective-rules">
 Things to consider when creating effective rules
</h3>
<p>
 Review the following considerations regarding creating effective security rules for machines in your virtual network.
</p>
<ul>
 <li>
  <p>
   <strong>
    Consider allowing all traffic
   </strong>
   . If you place your virtual machine within a subnet or utilize a network interface, you don't have to associate the subnet or NIC with a network security group. This approach allows all network traffic through the subnet or NIC according to the default Azure security rules. If you're not concerned about controlling traffic to your resource at a specific level, then don't associate your resource at that level to a network security group.
  </p>
 </li>
 <li>
  <p>
   <strong>
    Consider importance of allow rules
   </strong>
   . When you create a network security group, you must define an
   <strong>
    allow
   </strong>
   rule for both the subnet and network interface in the group to ensure traffic can get through. If you have a subnet or NIC in your network security group, you must define an allow rule at each level. Otherwise, the traffic is denied for any level that doesn't provide an allow rule definition.
  </p>
 </li>
 <li>
  <p>
   <strong>
    Consider intra-subnet traffic
   </strong>
   . The security rules for a network security group associated to a subnet can affect traffic between all virtual machines in the subnet. You can prohibit intra-subnet traffic by defining a rule in the network security group to deny all inbound and outbound traffic. This rule prevents all virtual machines in your subnet from communicating with each other.
  </p>
 </li>
 <li>
  <p>
   <strong>
    Consider rule priority
   </strong>
   . The security rules for a network security group are processed in priority order. To ensure a particular security rule is always processed, assign the lowest possible priority value to the rule. It's a good practice to leave gaps in your priority numbering, such as 100, 200, 300, and so. The gaps in the numbering allow you to add new rules without having to edit existing rules.
  </p>
 </li>
</ul>
<h3 id="view-effective-security-rules">
 View effective security rules
</h3>
<p>
 If you have several network security groups and aren't sure which security rules are being applied, you can use the
 <strong>
  Effective security rules
 </strong>
 link in the Azure portal. You can use the link to verify which security rules are applied to your machines, subnets, and network interfaces.
</p>
<p>
 <span class="mx-imgBorder">
  <img alt="Screenshot of the Networking page in the Azure portal showing the Effective security rules link highlighted." data-linktype="relative-path" loading="lazy" src="../../../assets/effective-security-rules-d93ab464_9eea9eef.png"/>
 </span>
</p>
<div class="alert is-info">
 <p class="alert-title">
  Note
 </p>
 <p>
  <a data-linktype="absolute-path" href="/en-us/azure/network-watcher/effective-security-rules-overview">
   Network Watcher
  </a>
  provides a consolidated view of your infrastructure rules.
 </p>
</div>

    </div>
    
    <div class="translation-placeholder">
        <h2>ðŸ‡»ðŸ‡³ Vietnamese Translation</h2>
        <p><em>Báº£n dá»‹ch tiáº¿ng Viá»‡t sáº½ Ä‘Æ°á»£c thÃªm vÃ o Ä‘Ã¢y...</em></p>
        <p><em>Translation will be added here...</em></p>
    </div>
</body>
</html>
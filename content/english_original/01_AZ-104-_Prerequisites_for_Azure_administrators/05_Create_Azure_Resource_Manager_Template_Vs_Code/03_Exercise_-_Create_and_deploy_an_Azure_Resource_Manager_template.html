<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise - Create and deploy an Azure Resource Manager template - Training | Microsoft Learn</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px;
            color: #333;
            background-color: #fff;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #0078d4;
            margin-top: 2em;
            margin-bottom: 1em;
            font-weight: 600;
        }
        
        h1 { 
            border-bottom: 3px solid #0078d4; 
            padding-bottom: 15px; 
            font-size: 2.2em;
            margin-bottom: 1.5em;
        }
        
        h2 { 
            font-size: 1.6em; 
            border-left: 4px solid #0078d4;
            padding-left: 15px;
        }
        
        h3 { font-size: 1.3em; }
        h4 { font-size: 1.1em; }
        
        p {
            margin: 16px 0;
            text-align: justify;
            line-height: 1.7;
        }
        
        ul, ol {
            margin: 20px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        code {
            background-color: #f6f8fa;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #d73a49;
        }
        
        pre {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border-left: 4px solid #0078d4;
            margin: 20px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: #333;
        }
        
        blockquote {
            border-left: 4px solid #0078d4;
            padding: 20px;
            margin: 20px 0;
            background-color: #f8f9fa;
            border-radius: 4px;
            font-style: italic;
        }
        
        .source-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 5px solid #2196f3;
            font-size: 0.9em;
        }
        
        .source-info h2 {
            margin-top: 0;
            color: #1976d2;
            font-size: 1.2em;
        }
        
        .translation-placeholder {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            padding: 20px;
            border-radius: 8px;
            margin-top: 40px;
            border-left: 5px solid #ff9800;
        }
        
        .translation-placeholder h2 {
            margin-top: 0;
            color: #f57c00;
            font-size: 1.2em;
        }
        
        img { 
            max-width: 100%; 
            height: auto; 
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Image container for better layout */
        .image-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .image-container img {
            margin: 10px 0;
        }
        
        .image-container p {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
            margin-top: 10px;
        }
        
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 25px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th, td { 
            border: 1px solid #ddd; 
            padding: 15px; 
            text-align: left; 
        }
        
        th { 
            background-color: #f5f5f5; 
            font-weight: bold;
            color: #0078d4;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        
        strong {
            color: #0078d4;
            font-weight: 600;
        }
        
        a {
            color: #0078d4;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        /* Alert boxes */
        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
            border-left: 4px solid;
        }
        
        .alert.is-info {
            background-color: #e3f2fd;
            border-left-color: #2196f3;
            color: #1976d2;
        }
        
        .alert.is-warning {
            background-color: #fff3e0;
            border-left-color: #ff9800;
            color: #f57c00;
        }
        
        .alert-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="source-info">
        <h2>ðŸ“š Course Information</h2>
        <p><strong>Unit:</strong> 3 Exercise Create And Deploy Template</p>
        <p><strong>Source:</strong> <a href="https://learn.microsoft.com/en-us/training/modules/create-azure-resource-manager-template-vs-code/3-exercise-create-and-deploy-template/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.az104-admin-prerequisites" target="_blank">https://learn.microsoft.com/en-us/training/modules/create-azure-resource-manager-template-vs-code/3-exercise-create-and-deploy-template/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.az104-admin-prerequisites</a></p>
        <p><strong>Course:</strong> AZ-104: Microsoft Azure Administrator</p>
    </div>
    
    <div class="main-content">
        <div class="alert is-info">
 <p class="alert-title">
  Note
 </p>
 <p>
  The first time you activate a sandbox and accept the terms, your Microsoft account is associated with a new Azure directory named Microsoft Learn Sandbox. You're also added to a special subscription named Concierge Subscription.
 </p>
</div>
<p>
 In this exercise, you create an Azure Resource Manager (ARM) template, deploy it to Azure, and then update that ARM template to add parameters and outputs.
</p>
<p>
 This exercise uses
 <a data-linktype="external" href="https://marketplace.visualstudio.com/items?itemName=msazurermtools.azurerm-vscode-tools">
  Azure Resource Manager Tools for Visual Studio Code
 </a>
 . Be sure to install this extension in Visual Studio Code before starting the exercise.
</p>
<h2 id="create-an-arm-template">
 Create an ARM template
</h2>
<ol>
 <li>
  <p>
   Open Visual Studio Code and create a new file called
   <em>
    azuredeploy.json
   </em>
   .
  </p>
 </li>
 <li>
  <p>
   The Visual Studio Code ARM template extension comes configured with snippets to help you develop templates. Let's start by adding a blank template. On line 1 of the file, enter
   <em>
    arm
   </em>
   .
  </p>
 </li>
 <li>
  <p>
   Visual Studio Code automatically displays several potential choices that start with
   <strong>
    arm!
   </strong>
   . Select the
   <strong>
    Azure Resource Manager (ARM) template
   </strong>
   . Visual Studio Code automatically processes the schemas and languages for your template.
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Visual Studio Code azuredeploy.json file showing the snippet choices for Azure Resource Manager templates." data-linktype="relative-path" loading="lazy" src="../../../assets/3-arm-snippet_b313f6d4.png"/>
   </span>
  </p>
  <p>
   Your file now looks like this:
  </p>
  <div class="codeHeader" data-bi-name="code-header" id="code-try-0">
   <span class="language">
    JSON
   </span>
  </div>
  <pre class="has-inner-focus"><code class="lang-json" data-author-content='{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {},
  "functions": [],
  "variables": {},
  "resources": [],
  "outputs": {}
}
'><span>{
  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"</span>,
  <span class="hljs-attr">"contentVersion"</span>: <span class="hljs-string">"1.0.0.0"</span>,
  <span class="hljs-attr">"parameters"</span>: {},
  <span class="hljs-attr">"functions"</span>: [],
  <span class="hljs-attr">"variables"</span>: {},
  <span class="hljs-attr">"resources"</span>: [],
  <span class="hljs-attr">"outputs"</span>: {}
}
</span></code></pre>
  <p>
   Notice that this file has all of the sections of an ARM template that we described in the previous unit.
  </p>
 </li>
 <li>
  <p>
   Save the changes to the file by pressing
   <kbd>
    Ctrl+S
   </kbd>
   .
  </p>
 </li>
</ol>
<h2 id="deploy-the-arm-template-to-azure">
 Deploy the ARM template to Azure
</h2>
<div class="zone has-pivot" data-pivot="cli">
 <p>
  To deploy this template to Azure, you need to sign in to your Azure account from the Visual Studio Code terminal. Be sure you have the
  <a data-linktype="absolute-path" href="/en-us/cli/azure/install-azure-cli">
   Azure CLI
  </a>
  tools installed, and sign in with the same account you used to activate the sandbox.
 </p>
 <ol>
  <li>
   <p>
    Select
    <strong>
     Terminal &gt; New Terminal
    </strong>
    to open a terminal window.
   </p>
  </li>
  <li>
   <p>
    If the command bar of the terminal window says
    <strong>
     bash
    </strong>
    , you have the right shell to work from and you can skip to the next section.
   </p>
  </li>
  <li>
   <p>
    If not, select the drop-down and choose
    <strong>
     Select Default Profile
    </strong>
    .
   </p>
   <p>
    <span class="mx-imgBorder">
     <img alt="Screenshot of the Visual Studio Code terminal window with bash in the drop-down." data-linktype="relative-path" loading="lazy" src="../../../assets/3-bash_91ac3cc9.png"/>
    </span>
   </p>
  </li>
  <li>
   <p>
    Select
    <strong>
     Git Bash
    </strong>
    .
   </p>
   <p>
    <span class="mx-imgBorder">
     <img alt="Screenshot of the Visual Studio Code terminal window showing the select shell drop-down." data-linktype="relative-path" loading="lazy" src="../../../assets/3-select-shell_b303f4c8.png"/>
    </span>
   </p>
  </li>
  <li>
   <p>
    Select
    <strong>
     Terminal &gt; New Terminal
    </strong>
    to open a bash shell terminal window.
   </p>
  </li>
 </ol>
 <h3 data-id="sign-in-to-azure">
  Sign in to Azure
 </h3>
 <ol>
  <li>
   <p>
    In the terminal window, run this command to sign in to Azure.
   </p>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-1">
    <span class="language">
     Azure CLI
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content="az login
"><span><span class="hljs-keyword">az login</span>
</span></code></pre>
  </li>
  <li>
   <p>
    In the browser window that opens, sign in to your account. After you sign in, a list of the subscriptions associated with this account displays in the terminal. If you activated the sandbox, you should see one called
    <em>
     Concierge Subscription
    </em>
    . Use this one for the rest of the exercise.
   </p>
  </li>
  <li>
   <p>
    In the bash shell, run the following command to set the default subscription for all of the Azure CLI commands you run in this session.
   </p>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-2">
    <span class="language">
     Azure CLI
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content='az account set --subscription "Concierge Subscription"
'><span><span class="hljs-keyword">az account set </span><span class="hljs-parameter">--subscription</span> <span class="hljs-string">"Concierge Subscription"</span>
</span></code></pre>
   <p>
    If you used more than one sandbox recently, more than one
    <em>
     Concierge Subscription
    </em>
    might be listed. If so, use the next two steps to identify and set the default subscription.
   </p>
   <ol>
    <li>
     Run the following command to obtain the
     <em>
      Concierge Subscription
     </em>
     IDs.
    </li>
   </ol>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-3">
    <span class="language">
     Azure CLI
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content=" az account list \
   --refresh \
   --query &quot;[?contains(name, 'Concierge Subscription')].id&quot; \
   --output table
"><span> az account list \
   <span class="hljs-parameter">--refresh</span> \
   <span class="hljs-parameter">--query</span> <span class="hljs-string">"[?contains(name, 'Concierge Subscription')].id"</span> \
   <span class="hljs-parameter">--output</span> table
</span></code></pre>
   <ol>
    <li>
     Set the default subscription by running the following command, replacing
     <em>
      {your subscription ID}
     </em>
     with the latest Concierge Subscription ID.
    </li>
   </ol>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-4">
    <span class="language">
     Azure CLI
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content="az account set --subscription {your subscription ID}
"><span><span class="hljs-keyword">az account set </span><span class="hljs-parameter">--subscription</span> {your subscription ID}
</span></code></pre>
  </li>
 </ol>
 <h3 data-id="set-the-default-resource-group">
  Set the default resource group
 </h3>
 <p>
  By setting the default resource group to the one created when you activated the sandbox, you can omit that parameter from the Azure CLI commands in this exercise. To set the resource group, run the following command.
 </p>
 <div class="codeHeader" data-bi-name="code-header" id="code-try-5">
  <span class="language">
   Azure CLI
  </span>
 </div>
 <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content='az configure --defaults group="&lt;rgn&gt;[sandbox resource group name]&lt;/rgn&gt;"
'><span><span class="hljs-keyword">az configure </span><span class="hljs-parameter">--defaults</span> <span class="hljs-parameter">group=</span><span class="hljs-string">"[sandbox resource group name]"</span>
</span></code></pre>
 <h3 data-id="deploy-the-template-to-azure">
  Deploy the template to Azure
 </h3>
 <p>
  Run the following commands to deploy the ARM template to Azure. The ARM template doesn't have any resources yet, so there aren't any resources created. You should get a successful deployment.
 </p>
 <div class="codeHeader" data-bi-name="code-header" id="code-try-6">
  <span class="language">
   Azure CLI
  </span>
 </div>
 <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content='templateFile="azuredeploy.json"
today=$(date +"%d-%b-%Y")
DeploymentName="blanktemplate-"$today

az deployment group create \
 --name $DeploymentName \
 --template-file $templateFile
'><span><span class="hljs-parameter">templateFile=</span><span class="hljs-string">"azuredeploy.json"</span>
<span class="hljs-parameter">today=</span>$(date +<span class="hljs-string">"%d-%b-%Y"</span>)
D<span class="hljs-parameter">eploymentName=</span><span class="hljs-string">"blanktemplate-"</span><span class="hljs-variable">$today</span>

<span class="hljs-keyword">az deployment group create </span>\
 <span class="hljs-parameter">--name</span> <span class="hljs-variable">$DeploymentName</span> \
 <span class="hljs-parameter">--template-file</span> <span class="hljs-variable">$templateFile</span>
</span></code></pre>
 <p>
  The top section of the preceding code sets the Azure CLI variables, which include the path to the template file to deploy and the name of the deployment. The bottom section,
  <code>
   az  deployment group create
  </code>
  , deploys the template to Azure. Notice that the deployment name is
  <code>
   blanktemplate
  </code>
  with the date as a suffix.
 </p>
 <p>
  You should see
  <code>
   Running...
  </code>
  in the terminal.
 </p>
</div>
<div class="zone has-pivot" data-pivot="powershell">
 <p>
  To deploy this template to Azure, you need to sign in to your Azure account from the Visual Studio Code terminal. Be sure that Azure PowerShell Tools are installed from the Visual Studio Code Extensions, and sign in to the same account that activated the sandbox.
 </p>
 <ol>
  <li>
   <p>
    In the command bar, select
    <strong>
     Terminal &gt; New Terminal
    </strong>
    to open a PowerShell window.
   </p>
  </li>
  <li>
   <p>
    If the command bar of the terminal window shows
    <strong>
     PowerShell
    </strong>
    , you have the right shell from which to work, and you can skip to the next section.
   </p>
   <p>
    <span class="mx-imgBorder">
     <img alt="Screenshot of the Visual Studio Code terminal window with the 'pwsh' terminal selected." data-linktype="relative-path" loading="lazy" src="../../../assets/3-pwsh_1b33a07e.png"/>
    </span>
   </p>
   <ol>
    <li>
     <p>
      If not, select the down arrow and in the dropdown list select PowerShell. If that option is missing, then select
      <strong>
       Select Default Profile
      </strong>
      .
     </p>
    </li>
    <li>
     <p>
      In the input field, scroll down and select
      <strong>
       PowerShell
      </strong>
      .
     </p>
     <p>
      <span class="mx-imgBorder">
       <img alt="Screenshot of the Visual Studio Code terminal window showing the select shell drop-down." data-linktype="relative-path" loading="lazy" src="../../../assets/3-select-shell_b303f4c8.png"/>
      </span>
     </p>
    </li>
    <li>
     <p>
      Select
      <strong>
       Terminal &gt; New Terminal
      </strong>
      to open a PowerShell terminal window.
     </p>
    </li>
   </ol>
  </li>
 </ol>
 <h3 id="sign-in-to-azure-by-using-azure-powershell">
  Sign in to Azure by using Azure PowerShell
 </h3>
 <ol>
  <li>
   <p>
    From the terminal in Visual Studio Code, run the following command to sign in to Azure. A browser opens so you can sign in to your account.
   </p>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-7">
    <span class="language">
     Azure PowerShell
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurepowershell" data-author-content="Connect-AzAccount
"><span><span class="hljs-pscommand">Connect-AzAccount</span>
</span></code></pre>
   <div class="alert is-success">
    <p class="alert-title">
     Tip
    </p>
    <p>
     The
     <a data-linktype="absolute-path" href="/en-us/powershell/azure/new-azureps-module-az">
      Az PowerShell module
     </a>
     is the replacement of AzureRM and is the recommended version to use for interacting with Azure.
    </p>
   </div>
  </li>
  <li>
   <p>
    Sign in using the account you used to activate the sandbox. After you sign in, Visual Studio Code lists the subscriptions associated with your account in the terminal window. If you activated the sandbox, you see a code block that contains
    <code>
     "name": "Concierge Subscription"
    </code>
    . You use this subscription for the rest of the exercise.
   </p>
  </li>
 </ol>
 <h3 id="set-the-default-subscription-for-all-powershell-commands-in-this-session">
  Set the default subscription for all PowerShell commands in this session
 </h3>
 <ol>
  <li>
   <p>
    Run the following command to obtain your subscription(s) and their ID(s). The subscription ID is the second column. Look for
    <em>
     Concierge Subscription
    </em>
    , and copy the value in the second column. It looks something like
    <em>
     aaaa0a0a-bb1b-cc2c-dd3d-eeeeee4e4e4e
    </em>
    :
   </p>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-8">
    <span class="language">
     Azure PowerShell
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurepowershell" data-author-content="Get-AzSubscription
"><span><span class="hljs-pscommand">Get-AzSubscription</span>
</span></code></pre>
  </li>
  <li>
   <p>
    Run the following command, replacing
    <em>
     {Your subscription ID}
    </em>
    with the one you copied in the previous step. This command changes your active subscription to the Concierge Subscription.
   </p>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-9">
    <span class="language">
     Azure PowerShell
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurepowershell" data-author-content="$context = Get-AzSubscription -SubscriptionId {Your subscription ID}
Set-AzContext $context
"><span><span class="hljs-variable">$context</span> = <span class="hljs-pscommand">Get-AzSubscription</span><span class="hljs-parameter"> -SubscriptionId</span> {Your subscription ID}
<span class="hljs-pscommand">Set-AzContext</span> <span class="hljs-variable">$context</span>
</span></code></pre>
  </li>
  <li>
   <p>
    Run the following command to let the default resource group be the resource group created for you in the sandbox environment. This action lets you omit that parameter from the rest of the Azure PowerShell commands in this exercise.
   </p>
   <div class="codeHeader" data-bi-name="code-header" id="code-try-10">
    <span class="language">
     Azure PowerShell
    </span>
   </div>
   <pre class="has-inner-focus"><code class="lang-azurepowershell" data-author-content="Set-AzDefault -ResourceGroupName &lt;rgn&gt;[sandbox resource group name]&lt;/rgn&gt;
"><span><span class="hljs-pscommand">Set-AzDefault</span><span class="hljs-parameter"> -ResourceGroupName</span> [sandbox resource group name]
</span></code></pre>
  </li>
 </ol>
 <h3 id="deploy-the-template-to-azure-1">
  Deploy the template to Azure
 </h3>
 <p>
  Deploy the template to Azure by running the following commands. The ARM template doesn't have any resources yet, so there aren't any resources created.
 </p>
 <div class="codeHeader" data-bi-name="code-header" id="code-try-11">
  <span class="language">
   Azure PowerShell
  </span>
 </div>
 <pre class="has-inner-focus"><code class="lang-azurepowershell" data-author-content='$templateFile="azuredeploy.json"
$today=Get-Date -Format "MM-dd-yyyy"
$deploymentName="blanktemplate-"+"$today"
New-AzResourceGroupDeployment `
  -Name $deploymentName `
  -TemplateFile $templateFile
'><span><span class="hljs-variable">$templateFile</span>=<span class="hljs-string">"azuredeploy.json"</span>
<span class="hljs-variable">$today</span>=<span class="hljs-pscommand">Get-Date</span><span class="hljs-parameter"> -Format</span> <span class="hljs-string">"MM-dd-yyyy"</span>
<span class="hljs-variable">$deploymentName</span>=<span class="hljs-string">"blanktemplate-"</span>+<span class="hljs-string">"<span class="hljs-variable">$today</span>"</span>
<span class="hljs-pscommand">New-AzResourceGroupDeployment</span> `
 <span class="hljs-parameter"> -Name</span> <span class="hljs-variable">$deploymentName</span> `
 <span class="hljs-parameter"> -TemplateFile</span> <span class="hljs-variable">$templateFile</span>
</span></code></pre>
 <p>
  The top section of the preceding code sets Azure PowerShell variables, which includes the path to the deployment file and the name of the deployment. Then, the
  <code>
   New-AzResourceGroupDeployment
  </code>
  command deploys the template to Azure. Notice that the deployment name is
  <code>
   blanktemplate
  </code>
  with the date as a suffix.
 </p>
</div>
<p>
 When you deploy your ARM template to Azure, go to the
 <a class="has-external-link-indicator" data-linktype="external" href="https://portal.azure.com/" target="az-portal">
  Azure portal
 </a>
 and make sure you're in the sandbox subscription. To do that, select your avatar in the upper-right corner of the page. Select
 <strong>
  Switch directory
 </strong>
 . In the list, choose the
 <strong>
  Microsoft Learn Sandbox
 </strong>
 directory.
</p>
<ol>
 <li>
  <p>
   In the resource menu, select
   <strong>
    Resource groups
   </strong>
   .
  </p>
 </li>
 <li>
  <p>
   Select the
   <em>
    <rgn data-author-content="[sandbox resource group name]">
     [sandbox resource group name]
    </rgn>
   </em>
   resource group.
  </p>
 </li>
 <li>
  <p>
   On the
   <strong>
    Overview
   </strong>
   pane, you see that one deployment succeeded.
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Azure portal interface for the resource group overview with the deployments section showing that one succeeded." data-linktype="relative-path" loading="lazy" src="../../../assets/3-deployment-succeeded_f21d9656.png"/>
   </span>
  </p>
 </li>
 <li>
  <p>
   Select
   <strong>
    1 Succeeded
   </strong>
   to see the details of the deployment.
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Azure portal interface for the deployments with the one deployment listed and a succeeded status." data-linktype="relative-path" loading="lazy" src="../../../assets/3-blanktemplate_d9e022fc.png"/>
   </span>
  </p>
 </li>
 <li>
  <p>
   Select
   <code>
    blanktemplate
   </code>
   to see what resources were deployed. In this case, it's empty because you didn't specify any resources in the template yet.
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Azure portal interface for the specific deployment with no resources listed." data-linktype="relative-path" loading="lazy" src="../../../assets/3-no-results_24dc1708.png"/>
   </span>
  </p>
 </li>
 <li>
  <p>
   Leave the page open in your browser so that you can check on deployments again.
  </p>
 </li>
</ol>
<h2 id="add-a-resource-to-the-arm-template">
 Add a resource to the ARM template
</h2>
<p>
 In the previous task, you learned how to create a blank template and deploy it. Now, you're ready to deploy an actual resource. In this task, you add an Azure storage account resource to the ARM template, by using a snippet from the Azure Resource Manager Tools extension for Visual Studio Code.
</p>
<ol>
 <li>
  <p>
   In the
   <em>
    azuredeploy.json
   </em>
   file in Visual Studio Code, place your cursor inside the brackets in the resources block
   <code>
    "resources":[],
   </code>
   .
  </p>
 </li>
 <li>
  <p>
   Enter
   <em>
    storage
   </em>
   inside the brackets. A list of related snippets appears. Select
   <strong>
    arm-storage
   </strong>
   .
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Visual Studio Code azure Resource Manager-storage snippet shown under the typed word storage." data-linktype="relative-path" loading="lazy" src="../../../assets/3-arm-storage_2187222b.png"/>
   </span>
  </p>
  <p>
   Your file looks like this:
  </p>
  <div class="codeHeader" data-bi-name="code-header" id="code-try-12">
   <span class="language">
    JSON
   </span>
  </div>
  <pre class="has-inner-focus"><code class="lang-json" data-author-content='{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {},
  "functions": [],
  "variables": {},
  "resources": [
    {
      "type": "Microsoft.Storage/storageAccounts",
      "apiVersion": "2023-05-01",
      "name": "storageaccount1",
      "tags": {
        "displayName": "storageaccount1"
      },
      "location": "[resourceGroup().location]",
      "kind": "StorageV2",
      "sku": {
        "name": "Premium_LRS"
      }
    }
  ],
  "outputs": {}
}
'><span>{
  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#"</span>,
  <span class="hljs-attr">"contentVersion"</span>: <span class="hljs-string">"1.0.0.0"</span>,
  <span class="hljs-attr">"parameters"</span>: {},
  <span class="hljs-attr">"functions"</span>: [],
  <span class="hljs-attr">"variables"</span>: {},
  <span class="hljs-attr">"resources"</span>: [
    {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Microsoft.Storage/storageAccounts"</span>,
      <span class="hljs-attr">"apiVersion"</span>: <span class="hljs-string">"2023-05-01"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"storageaccount1"</span>,
      <span class="hljs-attr">"tags"</span>: {
        <span class="hljs-attr">"displayName"</span>: <span class="hljs-string">"storageaccount1"</span>
      },
      <span class="hljs-attr">"location"</span>: <span class="hljs-string">"[resourceGroup().location]"</span>,
      <span class="hljs-attr">"kind"</span>: <span class="hljs-string">"StorageV2"</span>,
      <span class="hljs-attr">"sku"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Premium_LRS"</span>
      }
    }
  ],
  <span class="hljs-attr">"outputs"</span>: {}
}
</span></code></pre>
  <p>
   Values that you should edit are highlighted in the new section of your file, and you can navigate them by pressing the
   <kbd>
    Tab
   </kbd>
   key.
  </p>
  <p>
   Notice the
   <code>
    tags
   </code>
   and
   <code>
    location
   </code>
   attributes are filled in. The
   <code>
    location
   </code>
   attribute uses a function to set the location of the resource to the location of the resource group. You'll learn about tags and functions in the next module.
  </p>
 </li>
 <li>
  <p>
   Change the values of the resource
   <em>
    name
   </em>
   and
   <em>
    displayName
   </em>
   to something unique (for example,
   <strong>
    learnexercise12321
   </strong>
   ). This name must be unique across all of Azure, so choose something unique to you.
  </p>
 </li>
 <li>
  <p>
   Change the value of the sku
   <em>
    name
   </em>
   from
   <strong>
    Premium_LRS
   </strong>
   to
   <strong>
    Standard_LRS
   </strong>
   . Change the value of
   <em>
    tier
   </em>
   to
   <strong>
    Standard
   </strong>
   . Notice that Visual Studio Code gives you the proper choices for your attribute values in IntelliSense. Delete the default value including the quotation marks, and enter quotation marks to see this work.
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Screenshot of Visual Studio Code showing the IntelliSense choices for the name attribute of the storage SKU." data-linktype="relative-path" loading="lazy" src="../../../assets/3-vs-code-intellisense_f6a49192.png"/>
   </span>
  </p>
 </li>
 <li>
  <p>
   The resource location is set to the same location as the resource group where the resource is deployed. Leave the default here.
  </p>
 </li>
 <li>
  <p>
   Save the file.
  </p>
 </li>
</ol>
<h3 id="deploy-the-updated-arm-template">
 Deploy the updated ARM template
</h3>
<p>
 Here, you change the name of the deployment to better reflect what this deployment does.
</p>
<div class="zone has-pivot" data-pivot="cli">
 <p>
  Run the following Azure CLI commands in the terminal. This snippet is the same code you used previously, but the name of the deployment is changed.
 </p>
 <div class="codeHeader" data-bi-name="code-header" id="code-try-13">
  <span class="language">
   Azure CLI
  </span>
 </div>
 <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content='templateFile="azuredeploy.json"
today=$(date +"%d-%b-%Y")
DeploymentName="addstorage-"$today

az deployment group create \
  --name $DeploymentName \
  --template-file $templateFile
'><span><span class="hljs-parameter">templateFile=</span><span class="hljs-string">"azuredeploy.json"</span>
<span class="hljs-parameter">today=</span>$(date +<span class="hljs-string">"%d-%b-%Y"</span>)
D<span class="hljs-parameter">eploymentName=</span><span class="hljs-string">"addstorage-"</span><span class="hljs-variable">$today</span>

<span class="hljs-keyword">az deployment group create </span>\
  <span class="hljs-parameter">--name</span> <span class="hljs-variable">$DeploymentName</span> \
  <span class="hljs-parameter">--template-file</span> <span class="hljs-variable">$templateFile</span>
</span></code></pre>
</div>
<div class="zone has-pivot" data-pivot="powershell">
 <p>
  Run the following Azure PowerShell commands in the terminal. This snippet is the same code you used previously, but the name of the deployment is changed.
 </p>
 <div class="codeHeader" data-bi-name="code-header" id="code-try-14">
  <span class="language">
   Azure PowerShell
  </span>
 </div>
 <pre class="has-inner-focus"><code class="lang-azurepowershell" data-author-content='$templateFile="azuredeploy.json"
$today=Get-Date -Format "MM-dd-yyyy"
$deploymentName="addstorage-"+"$today"
New-AzResourceGroupDeployment `
  -Name $deploymentName `
  -TemplateFile $templateFile
'><span><span class="hljs-variable">$templateFile</span>=<span class="hljs-string">"azuredeploy.json"</span>
<span class="hljs-variable">$today</span>=<span class="hljs-pscommand">Get-Date</span><span class="hljs-parameter"> -Format</span> <span class="hljs-string">"MM-dd-yyyy"</span>
<span class="hljs-variable">$deploymentName</span>=<span class="hljs-string">"addstorage-"</span>+<span class="hljs-string">"<span class="hljs-variable">$today</span>"</span>
<span class="hljs-pscommand">New-AzResourceGroupDeployment</span> `
 <span class="hljs-parameter"> -Name</span> <span class="hljs-variable">$deploymentName</span> `
 <span class="hljs-parameter"> -TemplateFile</span> <span class="hljs-variable">$templateFile</span>
</span></code></pre>
</div>
<h3 id="check-your-deployment">
 Check your deployment
</h3>
<ol>
 <li>
  <p>
   When the deployment finishes, go back to the Azure portal in your browser. Go to your resource group, and you see that there are now
   <strong>
    2 Succeeded
   </strong>
   deployments. Select this link.
  </p>
  <p>
   Notice that both deployments are in the list.
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Screenshot of the Azure portal interface for the deployments with the two deployments listed and succeeded statuses." data-linktype="relative-path" loading="lazy" src="../../../assets/3-addstorage-deployment_5fee0d69.png"/>
   </span>
  </p>
 </li>
 <li>
  <p>
   Select
   <strong>
    addstorage
   </strong>
   .
  </p>
  <p>
   <span class="mx-imgBorder">
    <img alt="Screenshot of the Azure portal interface for the specific deployment with one resource listed." data-linktype="relative-path" loading="lazy" src="../../../assets/3-show-resource-deployed_65a474d9.png"/>
   </span>
  </p>
 </li>
</ol>
<p>
 Notice that the storage account is deployed.
</p>

    </div>
    
    <div class="translation-placeholder">
        <h2>ðŸ‡»ðŸ‡³ Vietnamese Translation</h2>
        <p><em>Báº£n dá»‹ch tiáº¿ng Viá»‡t sáº½ Ä‘Æ°á»£c thÃªm vÃ o Ä‘Ã¢y...</em></p>
        <p><em>Translation will be added here...</em></p>
    </div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add flexibility to your Azure Resource Manager template by using parameters and outputs - Training | Microsoft Learn</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px;
            color: #333;
            background-color: #fff;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #0078d4;
            margin-top: 2em;
            margin-bottom: 1em;
            font-weight: 600;
        }
        
        h1 { 
            border-bottom: 3px solid #0078d4; 
            padding-bottom: 15px; 
            font-size: 2.2em;
            margin-bottom: 1.5em;
        }
        
        h2 { 
            font-size: 1.6em; 
            border-left: 4px solid #0078d4;
            padding-left: 15px;
        }
        
        h3 { font-size: 1.3em; }
        h4 { font-size: 1.1em; }
        
        p {
            margin: 16px 0;
            text-align: justify;
            line-height: 1.7;
        }
        
        ul, ol {
            margin: 20px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        code {
            background-color: #f6f8fa;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #d73a49;
        }
        
        pre {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border-left: 4px solid #0078d4;
            margin: 20px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: #333;
        }
        
        blockquote {
            border-left: 4px solid #0078d4;
            padding: 20px;
            margin: 20px 0;
            background-color: #f8f9fa;
            border-radius: 4px;
            font-style: italic;
        }
        
        .source-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 5px solid #2196f3;
            font-size: 0.9em;
        }
        
        .source-info h2 {
            margin-top: 0;
            color: #1976d2;
            font-size: 1.2em;
        }
        
        .translation-placeholder {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            padding: 20px;
            border-radius: 8px;
            margin-top: 40px;
            border-left: 5px solid #ff9800;
        }
        
        .translation-placeholder h2 {
            margin-top: 0;
            color: #f57c00;
            font-size: 1.2em;
        }
        
        img { 
            max-width: 100%; 
            height: auto; 
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Image container for better layout */
        .image-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .image-container img {
            margin: 10px 0;
        }
        
        .image-container p {
            font-size: 0.9em;
            color: #666;
            font-style: italic;
            margin-top: 10px;
        }
        
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 25px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th, td { 
            border: 1px solid #ddd; 
            padding: 15px; 
            text-align: left; 
        }
        
        th { 
            background-color: #f5f5f5; 
            font-weight: bold;
            color: #0078d4;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        
        strong {
            color: #0078d4;
            font-weight: 600;
        }
        
        a {
            color: #0078d4;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        /* Alert boxes */
        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
            border-left: 4px solid;
        }
        
        .alert.is-info {
            background-color: #e3f2fd;
            border-left-color: #2196f3;
            color: #1976d2;
        }
        
        .alert.is-warning {
            background-color: #fff3e0;
            border-left-color: #ff9800;
            color: #f57c00;
        }
        
        .alert-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="source-info">
        <h2>ðŸ“š Course Information</h2>
        <p><strong>Unit:</strong> 4 Add Flexibility Arm Template</p>
        <p><strong>Source:</strong> <a href="https://learn.microsoft.com/en-us/training/modules/create-azure-resource-manager-template-vs-code/4-add-flexibility-arm-template/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.az104-admin-prerequisites" target="_blank">https://learn.microsoft.com/en-us/training/modules/create-azure-resource-manager-template-vs-code/4-add-flexibility-arm-template/?ns-enrollment-type=learningpath&ns-enrollment-id=learn.az104-admin-prerequisites</a></p>
        <p><strong>Course:</strong> AZ-104: Microsoft Azure Administrator</p>
    </div>
    
    <div class="main-content">
        <p>
 In the last unit, you created an Azure Resource Manager (ARM) template and added an Azure storage account to it. You might notice that there's a problem with your template. The storage account name is hardcoded. You can only use this template to deploy the same storage account every time. To deploy a storage account with a different name, you have to create a new template, which isn't a practical way to automate your deployments. The storage account SKU is also hardcoded, which means you can't vary the type of storage account for different environments. Recall that in our scenario, each deployment might have a different type of storage account. You can make your template more reusable by adding a parameter for the storage account SKU.
</p>
<p>
 In this unit, you learn about the
 <em>
  parameters
 </em>
 and
 <em>
  outputs
 </em>
 sections of the template.
</p>
<h2 id="arm-template-parameters">
 ARM-template parameters
</h2>
<p>
 ARM-template parameters let you customize the deployment by providing values that are tailored for a particular environment. For example, you pass in different values based on whether you're deploying to an environment for development, test, production, or others. For example, the previous template uses the
 <em>
  Standard_LRS
 </em>
 storage account SKU. You can reuse this template for other deployments that create a storage account by making the name of the storage account SKU a parameter. Then, you pass in the name of the SKU you want for this particular deployment when the template is deployed. You can do this step either at the command line or by using a parameter file.
</p>
<p>
 In the
 <code>
  parameters
 </code>
 section of the template, you specify which values you can input when you deploy the resources. You're limited to 256 parameters in a template. Parameter definitions can use most template functions.
</p>
<p>
 The available properties for a parameter are:
</p>
<div class="codeHeader" data-bi-name="code-header" id="code-try-0">
 <span class="language">
  JSON
 </span>
</div>
<pre class="has-inner-focus"><code class="lang-json" data-author-content='"parameters": {
  "&lt;parameter-name&gt;": {
    "type": "&lt;type-of-parameter-value&gt;",
    "defaultValue": "&lt;default-value-of-parameter&gt;",
    "allowedValues": [
      "&lt;array-of-allowed-values&gt;"
    ],
    "minValue": &lt;minimum-value-for-int&gt;,
    "maxValue": &lt;maximum-value-for-int&gt;,
    "minLength": &lt;minimum-length-for-string-or-array&gt;,
    "maxLength": &lt;maximum-length-for-string-or-array-parameters&gt;,
    "metadata": {
      "description": "&lt;description-of-the-parameter&gt;"
    }
  }
}
'><span><span class="hljs-string">"parameters"</span>: {
  <span class="hljs-attr">"&lt;parameter-name&gt;"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"&lt;type-of-parameter-value&gt;"</span>,
    <span class="hljs-attr">"defaultValue"</span>: <span class="hljs-string">"&lt;default-value-of-parameter&gt;"</span>,
    <span class="hljs-attr">"allowedValues"</span>: [
      <span class="hljs-string">"&lt;array-of-allowed-values&gt;"</span>
    ],
    <span class="hljs-attr">"minValue"</span>: &lt;minimum-value-for-int&gt;,
    <span class="hljs-attr">"maxValue"</span>: &lt;maximum-value-for-int&gt;,
    <span class="hljs-attr">"minLength"</span>: &lt;minimum-length-for-string-or-array&gt;,
    <span class="hljs-attr">"maxLength"</span>: &lt;maximum-length-for-string-or-array-parameters&gt;,
    <span class="hljs-attr">"metadata"</span>: {
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"&lt;description-of-the-parameter&gt;"</span>
    }
  }
}
</span></code></pre>
<p>
 The allowed types of parameters are:
</p>
<ul>
 <li>
  string
 </li>
 <li>
  secureString
 </li>
 <li>
  integers
 </li>
 <li>
  boolean
 </li>
 <li>
  object
 </li>
 <li>
  secureObject
 </li>
 <li>
  array
 </li>
</ul>
<h3 id="recommendations-for-using-parameters">
 Recommendations for using parameters
</h3>
<p>
 Use parameters for settings that vary according to the environment; for example, SKU, size, or capacity. Also use parameters for resource names that you want to specify yourself for easy identification or to comply with internal naming conventions. Provide a description for each parameter, and use default values whenever possible.
</p>
<p>
 For security reasons, never hardcode or provide default values for usernames and/or passwords in templates. Always use parameters for usernames and passwords (or secrets). Use
 <em>
  secureString
 </em>
 for all passwords and secrets. If you pass sensitive data in a JSON object, use the
 <em>
  secureObject
 </em>
 type. Template parameters with
 <em>
  secureString
 </em>
 or
 <em>
  secureObject
 </em>
 types can't be read or harvested after the deployment of the resource.
</p>
<h3 id="use-parameters-in-an-arm-template">
 Use parameters in an ARM template
</h3>
<p>
 In the parameters section of the ARM template, specify the parameters that you can input when you deploy the resources. You're limited to 256 parameters in a template.
</p>
<p>
 Here's an example of a template file with a parameter for the storage-account SKU defined in the template's
 <code>
  parameters
 </code>
 section. You can provide a default for the parameter to be used if no value is specified at execution.
</p>
<div class="codeHeader" data-bi-name="code-header" id="code-try-1">
 <span class="language">
  JSON
 </span>
</div>
<pre class="has-inner-focus"><code class="lang-json" data-author-content='"parameters": {
  "storageAccountType": {
    "type": "string",
    "defaultValue": "Standard_LRS",
    "allowedValues": [
      "Standard_LRS",
      "Standard_GRS",
      "Standard_ZRS",
      "Premium_LRS"
    ],
    "metadata": {
      "description": "Storage Account type"
    }
  }
}
'><span><span class="hljs-string">"parameters"</span>: {
  <span class="hljs-attr">"storageAccountType"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>,
    <span class="hljs-attr">"defaultValue"</span>: <span class="hljs-string">"Standard_LRS"</span>,
    <span class="hljs-attr">"allowedValues"</span>: [
      <span class="hljs-string">"Standard_LRS"</span>,
      <span class="hljs-string">"Standard_GRS"</span>,
      <span class="hljs-string">"Standard_ZRS"</span>,
      <span class="hljs-string">"Premium_LRS"</span>
    ],
    <span class="hljs-attr">"metadata"</span>: {
      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Storage Account type"</span>
    }
  }
}
</span></code></pre>
<p>
 Then, use the parameter in the resource definition. The syntax is
 <code>
  [parameters('name of the parameter')]
 </code>
 . Then, when you deploy you use the
 <code>
  parameters
 </code>
 function. In the next module, you learn more about functions.
</p>
<div class="codeHeader" data-bi-name="code-header" id="code-try-2">
 <span class="language">
  JSON
 </span>
</div>
<pre class="has-inner-focus"><code class="lang-json" data-author-content="&quot;resources&quot;: [
  {
    &quot;type&quot;: &quot;Microsoft.Storage/storageAccounts&quot;,
    &quot;apiVersion&quot;: &quot;2023-05-01&quot;,
    &quot;name&quot;: &quot;learntemplatestorage123&quot;,
    &quot;location&quot;: &quot;[resourceGroup().location]&quot;,
    &quot;sku&quot;: {
      &quot;name&quot;: &quot;[parameters('storageAccountType')]&quot;
    },
    &quot;kind&quot;: &quot;StorageV2&quot;,
    &quot;properties&quot;: {
      &quot;supportsHttpsTrafficOnly&quot;: true
    }
  }
]
"><span><span class="hljs-string">"resources"</span>: [
  {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Microsoft.Storage/storageAccounts"</span>,
    <span class="hljs-attr">"apiVersion"</span>: <span class="hljs-string">"2023-05-01"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"learntemplatestorage123"</span>,
    <span class="hljs-attr">"location"</span>: <span class="hljs-string">"[resourceGroup().location]"</span>,
    <span class="hljs-attr">"sku"</span>: {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"[parameters('storageAccountType')]"</span>
    },
    <span class="hljs-attr">"kind"</span>: <span class="hljs-string">"StorageV2"</span>,
    <span class="hljs-attr">"properties"</span>: {
      <span class="hljs-attr">"supportsHttpsTrafficOnly"</span>: <span class="hljs-literal">true</span>
    }
  }
]
</span></code></pre>
<p>
 When you deploy the template, you can provide a value for the parameter. Notice the last line in the following command:
</p>
<div class="tabGroup" data-bi-name="tab-group" id="tabgroup_1">
 <ul role="tablist">
  <li role="presentation">
   <a aria-controls="tabpanel_1_azure-cli" aria-selected="true" data-bi-name="tab" data-linktype="self-bookmark" data-tab="azure-cli" href="#tabpanel_1_azure-cli" role="tab" tabindex="0">
    Azure CLI
   </a>
  </li>
  <li role="presentation">
   <a aria-controls="tabpanel_1_azure-powershell" aria-selected="false" data-bi-name="tab" data-linktype="self-bookmark" data-tab="azure-powershell" href="#tabpanel_1_azure-powershell" role="tab" tabindex="-1">
    PowerShell
   </a>
  </li>
 </ul>
 <section data-tab="azure-cli" id="tabpanel_1_azure-cli" role="tabpanel">
  <div class="codeHeader" data-bi-name="code-header" id="code-try-3">
   <span class="language">
    Azure CLI
   </span>
  </div>
  <pre class="has-inner-focus"><code class="lang-azurecli" data-author-content='templateFile="azuredeploy.json"
az deployment group create \
  --name testdeployment1 \
  --template-file $templateFile \
  --parameters storageAccountType=Standard_LRS
'><span><span class="hljs-parameter">templateFile=</span><span class="hljs-string">"azuredeploy.json"</span>
<span class="hljs-keyword">az deployment group create </span>\
  <span class="hljs-parameter">--name</span> testdeployment1 \
  <span class="hljs-parameter">--template-file</span> <span class="hljs-variable">$templateFile</span> \
  <span class="hljs-parameter">--parameters</span> storageA<span class="hljs-parameter">ccountType=</span>Standard_LRS
</span></code></pre>
 </section>
 <section aria-hidden="true" data-tab="azure-powershell" hidden="hidden" id="tabpanel_1_azure-powershell" role="tabpanel">
  <div class="codeHeader" data-bi-name="code-header" id="code-try-4">
   <span class="language">
    Azure PowerShell
   </span>
  </div>
  <pre class="has-inner-focus"><code class="lang-azurepowershell" data-author-content='$templateFile="azuredeploy.json"
New-AzResourceGroupDeployment `
  -Name testdeployment1 `
  -TemplateFile $templateFile `
  -storageAccountType Standard_LRS
'><span><span class="hljs-variable">$templateFile</span>=<span class="hljs-string">"azuredeploy.json"</span>
<span class="hljs-pscommand">New-AzResourceGroupDeployment</span> `
 <span class="hljs-parameter"> -Name</span> testdeployment1 `
 <span class="hljs-parameter"> -TemplateFile</span> <span class="hljs-variable">$templateFile</span> `
 <span class="hljs-parameter"> -storageAccountType</span> Standard_LRS
</span></code></pre>
 </section>
</div>
<h2 id="arm-template-outputs">
 ARM template outputs
</h2>
<p>
 In your ARM template's outputs section, you can specify the values that are returned after a successful deployment. Here are the elements that make up the outputs section.
</p>
<div class="codeHeader" data-bi-name="code-header" id="code-try-5">
 <span class="language">
  JSON
 </span>
</div>
<pre class="has-inner-focus"><code class="lang-json" data-author-content='"outputs": {
  "&lt;output-name&gt;": {
    "condition": "&lt;boolean-value-whether-to-output-value&gt;",
    "type": "&lt;type-of-output-value&gt;",
    "value": "&lt;output-value-expression&gt;",
    "copy": {
      "count": &lt;number-of-iterations&gt;,
      "input": &lt;values-for-the-variable&gt;
    }
  }
}
'><span><span class="hljs-string">"outputs"</span>: {
  <span class="hljs-attr">"&lt;output-name&gt;"</span>: {
    <span class="hljs-attr">"condition"</span>: <span class="hljs-string">"&lt;boolean-value-whether-to-output-value&gt;"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"&lt;type-of-output-value&gt;"</span>,
    <span class="hljs-attr">"value"</span>: <span class="hljs-string">"&lt;output-value-expression&gt;"</span>,
    <span class="hljs-attr">"copy"</span>: {
      <span class="hljs-attr">"count"</span>: &lt;number-of-iterations&gt;,
      <span class="hljs-attr">"input"</span>: &lt;values-for-the-variable&gt;
    }
  }
}
</span></code></pre>
<div class="buttons buttons-right margin-bottom-none margin-top-sm">
 <!-- -->
 <!-- -->
</div>
<div class="has-inner-focus">
 <table aria-label="ARM template outputs" class="table">
  <thead>
   <tr>
    <th>
     Element
    </th>
    <th>
     Description
    </th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>
     <strong>
      output-name
     </strong>
    </td>
    <td>
     Must be a valid JavaScript identifier.
    </td>
   </tr>
   <tr>
    <td>
     <strong>
      condition
     </strong>
    </td>
    <td>
     (Optional) A Boolean value that indicates whether this output value is returned. When true, the value is included in the output for the deployment. When false, the output value is skipped for this deployment. When not specified, the default value is true.
    </td>
   </tr>
   <tr>
    <td>
     <strong>
      type
     </strong>
    </td>
    <td>
     The type of the output value.
    </td>
   </tr>
   <tr>
    <td>
     <strong>
      value
     </strong>
    </td>
    <td>
     (Optional) A template language expression to be evaluated and returned as an output value.
    </td>
   </tr>
   <tr>
    <td>
     <strong>
      copy
     </strong>
    </td>
    <td>
     (Optional) Copy is used to return more than one value for an output.
    </td>
   </tr>
  </tbody>
 </table>
</div>
<h3 id="use-outputs-in-an-arm-template">
 Use outputs in an ARM template
</h3>
<p>
 Here's an example to output the storage account's endpoints:
</p>
<div class="codeHeader" data-bi-name="code-header" id="code-try-6">
 <span class="language">
  JSON
 </span>
</div>
<pre class="has-inner-focus"><code class="lang-json" data-author-content="&quot;outputs&quot;: {
  &quot;storageEndpoint&quot;: {
    &quot;type&quot;: &quot;object&quot;,
    &quot;value&quot;: &quot;[reference('learntemplatestorage123').primaryEndpoints]&quot;
  }
}
"><span><span class="hljs-string">"outputs"</span>: {
  <span class="hljs-attr">"storageEndpoint"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,
    <span class="hljs-attr">"value"</span>: <span class="hljs-string">"[reference('learntemplatestorage123').primaryEndpoints]"</span>
  }
}
</span></code></pre>
<p>
 Notice the
 <code>
  reference
 </code>
 part of the expression. This function gets the runtime state of the storage account.
</p>
<h2 id="deploy-an-arm-template-again">
 Deploy an ARM template again
</h2>
<p>
 Recall that ARM templates are
 <em>
  idempotent
 </em>
 , which means you can deploy the template to the same environment again, and if nothing changes in the template, nothing changes in the environment. If a change is made to the template (for example, you change a parameter value), only that change is deployed. Your template can contain all of the resources you need for your Azure solution, and you can safely execute a template again. Resources are created only if they don't already exist, and updated only if there's a change.
</p>

    </div>
    
    <div class="translation-placeholder">
        <h2>ðŸ‡»ðŸ‡³ Vietnamese Translation</h2>
        <p><em>Báº£n dá»‹ch tiáº¿ng Viá»‡t sáº½ Ä‘Æ°á»£c thÃªm vÃ o Ä‘Ã¢y...</em></p>
        <p><em>Translation will be added here...</em></p>
    </div>
</body>
</html>